# Docker

This document describes how to install and use Docker on different platforms.

## Installation

If you are on Mac, Linux or Windows 10 Pro/Student editions, installing Docker
is relatively straightforward:

* [Mac](https://docs.docker.com/docker-for-mac/)
* [Linux official instructions](https://docs.docker.com/install/linux/docker-ce/ubuntu/)
* [Windows 10 Pro/Student](https://docs.docker.com/docker-for-windows/)

It is important to note that, on Mac and Windows, Docker runs under a virtual
machine so it will not use up all of the resources of your machine
(conversely, it'll equate to be working on a more limited machine). This can
be changed. But if you need more firepower, the idea is that you develop on
your laptop and scale to a server (e.g. running out of the lab).

The steps to install Docker include:

- Obtain a copy of Docker and install it:
    - `Windows10 Pro/Enterprise`: [Install Docker Desktop for Windows](https://docs.docker.com/docker-for-windows/install/)
    - `macOS`: [Get started with Docker Desktop for Mac](https://docs.docker.com/docker-for-mac/)
- Once Docker is successfully installed, make sure to enable access to your main drive (e.g. `C:\\`): 
    - `Windows10 Pro/Enterprise`: Open the preferences for Docker and click the
      "Shared Drives" tab; click on the drive you want to add and then "Apply"
    - `macOS`: this feature is automatically enabled

## Image and Container

Docker can be seen as a tool to generate a computer within your computer (the host). This creates a working environment that employs the host's resources but follows its own internal rules. 

Image and Container are two key concepts to understand Docker processes.

Images are files containing all the instructions to build a complete and executable version of an application, relying on the host OS kernel.

Containers are instantiations of images, meaning that they are instances of the images running in an isolated environment. The same image can be instantiated in multiple containers.

## Useful Docker Commands

List available images :

```
docker image ls
```

See what containers are running (this also shows you the ID and which port is occupying):

```
docker ps
```
The run command instantiates an image in an isolated container. The generic command is:

```
docker run [OPTIONS] IMAGE[:TAG] [COMMAND] [ARG...]
```
Options that are generally added are:

```
--detach or -d -> Run container in background and print container ID

If you do not add this option to the run command you can detach from a running docker session without exiting the shell, the escape sequence *CTRL + p* followed by *CTRL + q* can be used. To re-attach the terminal to the docker session enter: docker attach <session_id>

-rm  -> Automatically remove the container when it exits

--publish or -p -> Publish a containerâ€™s port(s) to the host (This is key when running server-based application through Docker. A network port is the communication enpoint in a client-server model, specifying which program a communication is intended for.)

--volume or -v -> Bind mount a volume 

All other options are listed [here](https://docs.docker.com/engine/reference/commandline/run/)
```

To stop the container you have been running you need to send the following commands: 

```
if you have not added -d to the run command, detach from the container with the escape sequence.

docker ps   **to get the Container ID**

docker stop <container-ID>  

if you have not added -rm option you need to manually remove the container
docker rm -f <container-ID>

```

