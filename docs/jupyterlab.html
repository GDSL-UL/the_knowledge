<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 JupyterLab | The Knowledge</title>
  <meta name="description" content="What every GDSLer should know to work from anywhere" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 JupyterLab | The Knowledge" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="What every GDSLer should know to work from anywhere" />
  <meta name="github-repo" content="gdsl-ul/the_knowledge" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 JupyterLab | The Knowledge" />
  
  <meta name="twitter:description" content="What every GDSLer should know to work from anywhere" />
  

<meta name="author" content="Geographic Data Science Lab" />


<meta name="date" content="2020-03-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="docker.html"/>
<link rel="next" href="rstudio-server.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> The Knowledge</a></li>
<li class="chapter" data-level="2" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>2</b> Files</a><ul>
<li class="chapter" data-level="2.1" data-path="files.html"><a href="files.html#backupsync"><i class="fa fa-check"></i><b>2.1</b> Backup/sync</a></li>
<li class="chapter" data-level="2.2" data-path="files.html"><a href="files.html#encryption"><i class="fa fa-check"></i><b>2.2</b> Encryption</a></li>
<li class="chapter" data-level="2.3" data-path="files.html"><a href="files.html#file-transfer-protocol-ftp"><i class="fa fa-check"></i><b>2.3</b> File Transfer Protocol (FTP)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vpn.html"><a href="vpn.html"><i class="fa fa-check"></i><b>3</b> VPN</a><ul>
<li class="chapter" data-level="3.1" data-path="vpn.html"><a href="vpn.html#what-is-a-vpn"><i class="fa fa-check"></i><b>3.1</b> <em>What is a VPN?</em></a></li>
<li class="chapter" data-level="3.2" data-path="vpn.html"><a href="vpn.html#how-can-i-setup-the-vpn-for-liverpool"><i class="fa fa-check"></i><b>3.2</b> <em>How can I setup the VPN for Liverpool?</em></a></li>
<li class="chapter" data-level="3.3" data-path="vpn.html"><a href="vpn.html#set-up-a-vpn-connection"><i class="fa fa-check"></i><b>3.3</b> Set up a VPN connection</a></li>
<li class="chapter" data-level="3.4" data-path="vpn.html"><a href="vpn.html#how-to-use-the-globalprotect-vpn-client-to-access-the-university-network"><i class="fa fa-check"></i><b>3.4</b> How to use the GlobalProtect VPN Client to access the University network</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-science-stack.html"><a href="data-science-stack.html"><i class="fa fa-check"></i><b>4</b> Data Science Stack</a></li>
<li class="chapter" data-level="5" data-path="docker.html"><a href="docker.html"><i class="fa fa-check"></i><b>5</b> Docker</a><ul>
<li class="chapter" data-level="5.1" data-path="docker.html"><a href="docker.html#installation"><i class="fa fa-check"></i><b>5.1</b> Installation</a></li>
<li class="chapter" data-level="5.2" data-path="docker.html"><a href="docker.html#useful-docker-commands"><i class="fa fa-check"></i><b>5.2</b> Useful Docker Commands</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="jupyterlab.html"><a href="jupyterlab.html"><i class="fa fa-check"></i><b>6</b> JupyterLab</a><ul>
<li class="chapter" data-level="6.1" data-path="jupyterlab.html"><a href="jupyterlab.html#local-install"><i class="fa fa-check"></i><b>6.1</b> Local install</a></li>
<li class="chapter" data-level="6.2" data-path="jupyterlab.html"><a href="jupyterlab.html#remote-install"><i class="fa fa-check"></i><b>6.2</b> Remote install</a></li>
<li class="chapter" data-level="6.3" data-path="jupyterlab.html"><a href="jupyterlab.html#useful-python-docker-images"><i class="fa fa-check"></i><b>6.3</b> Useful Python Docker Images</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rstudio-server.html"><a href="rstudio-server.html"><i class="fa fa-check"></i><b>7</b> RStudio server</a><ul>
<li class="chapter" data-level="7.1" data-path="rstudio-server.html"><a href="rstudio-server.html#local-install-1"><i class="fa fa-check"></i><b>7.1</b> Local install</a></li>
<li class="chapter" data-level="7.2" data-path="rstudio-server.html"><a href="rstudio-server.html#remote-install-1"><i class="fa fa-check"></i><b>7.2</b> Remote install</a></li>
<li class="chapter" data-level="7.3" data-path="rstudio-server.html"><a href="rstudio-server.html#useful-r-docker-images"><i class="fa fa-check"></i><b>7.3</b> Useful R Docker Images</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Knowledge</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="jupyterlab" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> JupyterLab</h1>
<p>This document shows how to install and run a JupyterLab server locally and remotely.</p>
<div id="local-install" class="section level2">
<h2><span class="header-section-number">6.1</span> Local install</h2>
<p>This guide assumes you meet the following requirements in your personal machine (eg. laptop):</p>
<ol style="list-style-type: decimal">
<li>You have admin rights over your machine</li>
<li>You are running either Windows 10 Pro, macOS, or Linux</li>
</ol>
<p>Assuming Docker is up and running (check <a href="setup_docker.md"><code>setup_docker.md</code></a> for that), you can install an “image”, which is the install that will let you run containers, by typing on a command line (<code>Terminal.app</code> or <code>PowerShell</code> are both good options):</p>
<pre><code>docker pull darribas/gds:4.0</code></pre>
<p>This will take a while to download but, once finished, you will be ready to go.</p>
<p>Once the command above has finished installing your GDS stack, you are ready to go! To get a Jupyter session started, you can follow these steps:</p>
<ol style="list-style-type: decimal">
<li><p>Run on the same terminal as above the following command:</p>
<pre class="shell"><code>docker run --rm -ti -p 8888:8888 -v ${PWD}:/home/jovyan/work darribas/gds:4.0</code></pre></li>
</ol>
<p>The command above spins up a container of the <code>gds</code> image, version 4.0 and ensures it is connected through two main bridges:</p>
<ul>
<li>Mapping your laptop’s file system from where you have launched the command (<code>${PWD}</code>) to a folder called <code>work</code> on the home directory of the container. When you login to Jupyter (see below), you will see a <code>work</code> folder and, if you click into it, you should see the content of your laptops folder in there.</li>
<li>Mapping port <code>8888</code> from the container to your laptop, so you can connect to it through a browser.</li>
</ul>
<p>It is important to know this command starts a Jupyter server on your machine and keeps it running, so please do not quit the window until you are done using Jupyter, otherwise it will crash.</p>
<ol start="2" style="list-style-type: decimal">
<li>Open your favorite browser (preferably Firefox or Chrome) and point it to <code>localhost:8888</code></li>
<li>You will be asked for a password or a token. To find the correct one, check the terminal where you started the <code>docker run ...</code> command in 1) and look for the long token in the logs. Your prompt should look something (albeit not exactly) like this:</li>
</ol>
<p>```shell docker run –rm -ti -p 8888:8888 -v ${PWD}:/home/jovyan/work darribas/gds:4.0 Executing the command: jupyter notebook [I 11:38:40.234 NotebookApp] Writing notebook server cookie secret to /home/jovyan/.local/share/jupyter/runtime/notebook_cookie_secret [I 11:38:41.328 NotebookApp] Loading IPython parallel extension [I 11:38:41.612 NotebookApp] JupyterLab extension loaded from /opt/conda/lib/python3.7/site-packages/jupyterlab [I 11:38:41.612 NotebookApp] JupyterLab application directory is /opt/conda/share/jupyter/lab [I 11:38:43.091 NotebookApp] Serving notebooks from local directory: /home/jovyan [I 11:38:43.091 NotebookApp] The Jupyter Notebook is running at: [I 11:38:43.091 NotebookApp] <a href="http://ee20e7549b49:8888/?token=4dc814ee44c64383d5d32dfd439fe62bbc17d9803d9ae434" class="uri">http://ee20e7549b49:8888/?token=4dc814ee44c64383d5d32dfd439fe62bbc17d9803d9ae434</a> [I 11:38:43.091 NotebookApp] or <a href="http://127.0.0.1:8888/?token=4dc814ee44c64383d5d32dfd439fe62bbc17d9803d9ae434" class="uri">http://127.0.0.1:8888/?token=4dc814ee44c64383d5d32dfd439fe62bbc17d9803d9ae434</a> [I 11:38:43.091 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation). [C 11:38:43.114 NotebookApp]</p>
<pre><code>    To access the notebook, open this file in a browser:
        file:///home/jovyan/.local/share/jupyter/runtime/nbserver-6-open.html
    Or copy and paste one of these URLs:
        http://ee20e7549b49:8888/?token=4dc814ee44c64383d5d32dfd439fe62bbc17d9803d9ae434
     or http://127.0.0.1:8888/?token=4dc814ee44c64383d5d32dfd439fe62bbc17d9803d9ae434</code></pre>
<p>```</p>
<p>The token you want to copy is the long series of letter and numbers right after <code>?token=</code>, starting by <code>4dc814ee</code>. 4. The token should let you into your Jupyter Lab session. Congratulations! You can then access the files in your computer through the <code>work</code> directory on the left-side pane.</p>
</div>
<div id="remote-install" class="section level2">
<h2><span class="header-section-number">6.2</span> Remote install</h2>
<p>It is also possible to start a Jupyter server as above but, instead of run it on your local machine, it can run on a remote machine and you connect to that through your browser over the internet. The process in this context is a bit more intricate because you need to ensure that the connection is secure, but overall it follows a similar pattern. The following steps below assume you can login to the remote server where you want to run Jupyter through <code>ssh</code> and the serve already has a Docker image installed, ready to be run.</p>
<ul>
<li><p>Login to the remote machine:</p>
<pre><code>ssh &lt;username&gt;@&lt;server.ip.address&gt;</code></pre></li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Launch the container:</p>
<pre class="shell"><code>docker run --rm -ti -p 8888:8888 -v ${PWD}:/home/jovyan/work darribas/gds:4.0 start.sh</code></pre>
<p>Note we are appending <code>start.sh</code> so it drops us into the command line of the container rather than launching the server directly</p></li>
<li>Run <code>jupyter notebook --generate-config</code></li>
<li>Generate SSH keys with: <code>openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout mykey.key -out mycert.pem</code></li>
<li>Generate password as in the official <a href="http://jupyter-notebook.readthedocs.io/en/stable/public_server.html#preparing-a-hashed-password">tutorial</a></li>
<li><p>Update <code>/home/jovyan/.jupyter/jupyter_notebook_config.py</code></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Set options for certfile, ip, password, and toggle off</span>
<span class="co"># browser auto-opening</span>
c.NotebookApp.certfile <span class="op">=</span> <span class="st">u&#39;/home/jovyan/mycert.pem&#39;</span>
c.NotebookApp.keyfile <span class="op">=</span> <span class="st">u&#39;/home/jovyan/mykey.key&#39;</span>
<span class="co"># Set ip to &#39;*&#39; to bind on all interfaces (ips) for the public server</span>
c.NotebookApp.ip <span class="op">=</span> <span class="st">&#39;*&#39;</span>
c.NotebookApp.password <span class="op">=</span> <span class="st">u&#39;sha1:bcd259ccf...&lt;your hashed password here&gt;&#39;</span>
c.NotebookApp.open_browser <span class="op">=</span> <span class="va">False</span>

<span class="co"># It is a good idea to set a known, fixed port for server access</span>
c.NotebookApp.port <span class="op">=</span> <span class="dv">8888</span></code></pre></div></li>
<li>Launch secure Lab: <code>jupyter lab</code></li>
<li><p>On your own machine (laptop/tablet), log in to <code>&lt;server.ip.address&gt;:8888</code> with the password you have set</p></li>
</ol>
</div>
<div id="useful-python-docker-images" class="section level2">
<h2><span class="header-section-number">6.3</span> Useful Python Docker Images</h2>
<ul>
<li><a href="https://github.com/darribas/gds_env"><code>gds_env</code></a>: a containerised platform for Geographid Data Science in Jupyter (Python &amp; R)</li>
<li><a href="https://github.com/jupyter/docker-stacks"><code>jupyter-stacks</code></a>: official Jupyter stacks (the <code>gds_env</code> is based on these)</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="docker.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rstudio-server.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06_JupyterLab.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["gdsl_knowledge.pdf", "gdsl_knowledge.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
